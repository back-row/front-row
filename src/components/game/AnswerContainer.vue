<script setup lang='ts'>
import { ref } from 'vue';
import type {Ref} from 'vue';

type answer= {answer: string, id: string} 

const selectedAnswer = ref('');
const answers: Ref<answer[]> = ref([])

getAnswers().then(obj => [
  answers.value.push({answer: obj.quizanswer1, id: '1'}),
  answers.value.push({answer: obj.quizanswer2, id: '2'}),
  answers.value.push({answer: obj.quizanswer3, id: '3'})
])

async function getAnswers() {
  const response = await fetch('http://localhost:8000/quiz/1');
  const data = await response.text();
  const obj = JSON.parse(data);
  console.log('Answers: ', obj);
  return obj;
}

const onSubmit = () => {
  console.log(selectedAnswer.value)
};

</script>

<template>
  <div class="relative bg-[#2C3540] h-80 w-full p-2 pt-4 rounded-sm">
        <div class="bg-[#E5E5E5] h-4/5">
          <div v-for="answer in answers" :key="answer.id" class="flex items-center ml-4">
              <input type="radio" class="border-black border-2 w-4 h-4" v-model="selectedAnswer" :inputId="answer.id" :value="answer.answer" />
              <label :for="answer.id" class="ml-2">{{ answer.answer }}</label>
          </div>
        </div>
      <Button type="submit" @click.prevent="onSubmit()" class="hover:animate-pulse bg-[#408080] h-10 w-20 m-2 rounded-md flex items-center justify-center absolute bottom-0 right-0 text-white">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-8 h-8">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z" />
        </svg>
      Run</Button>
  </div>
</template>

<style scoped>
</style>